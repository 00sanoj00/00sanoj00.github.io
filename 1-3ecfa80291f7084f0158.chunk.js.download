((self||this).webpackJsonp=(self||this).webpackJsonp||[]).push([[1],{106:function(n,e,t){"use strict";t.d(e,"c",function(){return i}),t.d(e,"a",function(){return a}),t.d(e,"b",function(){return u});var r=function(n){return Math.floor(n/1e3)},i=function(){return r(Date.now())},a=function(n,e,t){if(!/\d\d\d\d/.test(n+"")||e>12||t>31)throw"Invalid date ".concat(n,", ").concat(e,", ").concat(t);return r(new Date("".concat(n,".").concat(e,".").concat(t)).getTime())},u=function(n){return Math.floor((i()-n)/60/60/24)}},11:function(n,e,t){"use strict";var r=t(22),i=t.n(r),a=t(0),u=t.n(a),o=t(2),s=t.n(o),p=t(1),c=t.n(p),l=function(n){var e=n.icon,t=n.refLink,r=n.width,a=n.height,o=n.className,p=void 0===o?"":o;if(e){p=p+" icon icon-"+e;var c=t?"#"+t:"#"+e,l={};return r&&(l.width=r),a&&(l.height=a),s.a.createElement("svg",i()({},l,{className:p}),u()("use",{xlinkHref:c}))}return null};l.propTypes={icon:c.a.string.isRequired,refLink:c.a.string,className:c.a.string,width:c.a.string,height:c.a.string},e.a=l},115:function(n,e,t){"use strict";t.d(e,"g",function(){return y}),t.d(e,"f",function(){return h}),t.d(e,"b",function(){return w}),t.d(e,"d",function(){return S}),t.d(e,"a",function(){return P}),t.d(e,"e",function(){return _}),t.d(e,"c",function(){return D});var r,i=t(10),a=t.n(i),u=t(38),o=t.n(u),s=t(63),p=t.n(s),c=t(106),l=t(49),d=function(){return"true"===localStorage.getItem("integrationTest")},f=function(){var n=p()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.all([t.e(16),t.e(7)]).then(t.bind(null,1455)).then(function(n){return n.default}));case 1:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),m=function(){var n=p()(o.a.mark(function n(){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:if(!r){n.next=4;break}return n.abrupt("return",r);case 4:return n.next=6,f();case 6:return(e=n.sent).apps.length<1&&e.initializeApp(window.__firestore.config),n.abrupt("return",e.auth().signInWithCustomToken(window.__firestore.token).then(function(){return e.firestore().settings({}),r=e.firestore()}));case 9:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),v=function(){var n=p()(o.a.mark(function n(e){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return t=n.sent,n.abrupt("return",t.doc("users/".concat(e.hashid)));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),g=function(n,e){return a()({__typename:l.a.USER,id:n.hashid,featureNotifications:[]},e)},y=function(){var n=p()(o.a.mark(function n(e,t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,v(e);case 4:n.sent.onSnapshot(function(n){t(g(e,n.data()))});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),h=function(){var n=p()(o.a.mark(function n(e,t){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,m();case 4:return r=n.sent,n.abrupt("return",r.collection("users/".concat(e.hashid,"/pins")).onSnapshot(function(n){var e=[];n.forEach(function(n){var t=n.data();e.push(a()({},t))}),t(e)}));case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),I=function(){var n=p()(o.a.mark(function n(e,t){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return r=n.sent,n.abrupt("return",r.doc("users/".concat(e.hashid,"/pins/").concat(t)));case 4:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),w=function(){var n=p()(o.a.mark(function n(e,t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,I(e,t.id);case 4:n.sent.set(t);case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),S=function(){var n=p()(o.a.mark(function n(e,t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,I(e,t);case 4:n.sent.delete();case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),P=function(){var n=p()(o.a.mark(function n(e,t){var r,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,v(e);case 4:return r=n.sent,n.next=7,f();case 7:i=n.sent,r.set({__typename:l.a.USER,id:e.hashid,featureNotifications:i.firestore.FieldValue.arrayUnion(t),updatedAt:Object(c.c)()},{merge:!0});case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),b=function(){var n=p()(o.a.mark(function n(e){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m();case 2:return t=n.sent,n.abrupt("return",t.doc("items/".concat(e)));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),O=function(n,e,t){if("string"!=typeof n)throw"Invalid ID ".concat(n);if("string"!=typeof e)throw"Invalid ID ".concat(e);if(""===n||""===e)throw"Invalid values: ".concat(n,", ").concat(e);if(0===Object.keys(t).length)throw"Invalid attributes"},k=function(n,e,t){return r=a()({},t,{id:n,ownerId:e,updatedAt:Object(c.c)()}),JSON.parse(JSON.stringify(r));var r},_=function(){var n=p()(o.a.mark(function n(e,t,r){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(!d()){n.next=4;break}return n.abrupt("return");case 4:f().then(p()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return O(e,t,r),n.next=3,b(e);case 3:n.sent.set(k(e,t,r),{merge:!0});case 5:case"end":return n.stop()}},n)})));case 5:case"end":return n.stop()}},n)}));return function(e,t,r){return n.apply(this,arguments)}}(),T=function(){var n=p()(o.a.mark(function n(e,t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,b(e);case 4:n.sent.onSnapshot(function(n){t(n.data())});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}(),D=function(){var n=p()(o.a.mark(function n(){var e,t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!d()){n.next=2;break}return n.abrupt("return",{enabled:!1});case 2:return n.next=4,m();case 4:return e=n.sent,n.next=7,e.doc("analytics/heap").get();case 7:if(!(t=n.sent).exists){n.next=10;break}return n.abrupt("return",t.data());case 10:return n.abrupt("return",{enabled:!1});case 11:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();window.firestoreConnect={onItemChanges:T,setItemAttributes:_};var E,C=window.__rtData,N=null;window.CPFirebase={auth:function(n){E?n():f().then(function(e){e.apps.length<1&&e.initializeApp(window.__firestore.config),window.firebase=e,e.auth().signInWithCustomToken(window.__firestore.token).then(function(){E=e.database(),N=E.ref(),n()}).catch(function(n){console.log(n)})})},getFirebase:f,getRef:function(n){return N.child(C.roomID+"/"+n)}}},121:function(n,e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DeletedItemsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletedItemsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedItems"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDeleting"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"isRestoring"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previousCursor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:329}};t.loc.source={body:"query DeletedItemsQuery($input: DeletedItemsInput!) {\n  deletedItems(input: $input) {\n    deletedItems {\n      id\n      deletedAt\n      key\n      title\n      itemType\n      isDeleting @client\n      isRestoring @client\n    }\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      nextCursor\n      previousCursor\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(n,e){for(var t=0;t<n.definitions.length;t++){var r=n.definitions[t];if(r.name&&r.name.value==e)return r}}t.definitions.forEach(function(n){if(n.name){var e=new Set;!function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var r=e.type;"NamedType"===r.kind&&t.add(r.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){n(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){n(e,t)}),e.definitions&&e.definitions.forEach(function(e){n(e,t)})}(n,e),r[n.name.value]=e}}),n.exports=t,n.exports.DeletedItemsQuery=function(n,e){var t={kind:n.kind,definitions:[i(n,e)]};n.hasOwnProperty("loc")&&(t.loc=n.loc);var a=r[e]||new Set,u=new Set,o=new Set;for(a.forEach(function(n){o.add(n)});o.size>0;){var s=o;o=new Set,s.forEach(function(n){u.has(n)||(u.add(n),(r[n]||new Set).forEach(function(n){o.add(n)}))})}return u.forEach(function(e){var r=i(n,e);r&&t.definitions.push(r)}),t}(t,"DeletedItemsQuery")},178:function(n,e,t){"use strict";t.d(e,"b",function(){return u}),t.d(e,"a",function(){return o});var r=t(8),i=t.n(r),a=t(106),u={TOPICS:"TOPICS"},o=i()({},u.TOPICS,{value:u.TOPICS,showUntil:Object(a.a)(2019,5,15)})},18:function(n,e,t){"use strict";var r=t(0),i=t.n(r),a=t(14),u=t.n(a),o=t(2),s=t.n(o),p=t(1),c=t.n(p),l=t(86),d=t(15),f=t.n(d),m=t(26),v=t(81),g=t(211);function y(){var n=u()(["\n  mutation OpenModal($input: PopupsOpenModalInput!) {\n    popupsOpenModal(input: $input) @client\n  }\n"]);return y=function(){return n},n}var h=f()(y()),I=i()("p",{className:"loading-message"},void 0,"Loading..."),w=function(n){return s.a.createElement(l.d,n,function(e){var t=n.renderBeforeDataReady,r=n.renderWhenDataReady,a=n.loadingIndicator,u=n.children,o=n.errorHandler,s=n.showModalOnError,p=n.errorRender,c=e.loading,d=e.error;return d?(Object(v.b)(d),o&&o(),p||(s?i()(l.c,{mutation:h},void 0,function(n){return i()(g.a,{openModal:n,type:"QUERY"})}):null)):c&&!t?r?null:void 0===a?I:a:u(e)})};w.propTypes={children:m.a,renderBeforeDataReady:c.a.bool,renderWhenDataReady:c.a.bool,loadingIndicator:c.a.node,errorHandler:c.a.func,showModalOnError:c.a.bool,errorRender:c.a.func},e.a=w},20:function(n,e,t){"use strict";t.d(e,"a",function(){return r}),t.d(e,"b",function(){return i});var r={PEN:"PEN",PROJECT:"PROJECT",POST:"POST",COLLECTION:"COLLECTION"},i={PEN:"pen",EDITOR:"editor",FULL:"full",DETAILS:"details",DEBUG:"debug",LIVE:"live",COLLAB:"collab",PRESENTATION:"pres",PROFESSOR:"professor"}},211:function(n,e,t){"use strict";var r=t(3),i=t.n(r),a=t(4),u=t.n(a),o=t(6),s=t.n(o),p=t(5),c=t.n(p),l=t(7),d=t.n(l),f=t(8),m=t.n(f),v=t(2),g=t(1),y=t.n(g),h=t(51),I=function(n){function e(){return i()(this,e),s()(this,c()(e).apply(this,arguments))}return d()(e,n),u()(e,[{key:"componentDidMount",value:function(){this.props.openModal({variables:{input:{type:h.b["".concat(this.props.type,"_ERROR")]}}})}},{key:"render",value:function(){return null}}]),e}(v.Component);m()(I,"propTypes",{openModal:y.a.func.isRequired,type:y.a.oneOf(["QUERY","MUTATION"]).isRequired}),e.a=I},24:function(n,e,t){"use strict";(function(n){var r=t(0),i=t.n(r),a=t(14),u=t.n(a),o=t(2),s=t.n(o),p=t(1),c=t.n(p),l=t(86),d=t(15),f=t.n(d),m=t(81),v=t(211),g=t(26);function y(){var n=u()(["\n  mutation OpenModal($input: PopupsOpenModalInput!) {\n    popupsOpenModal(input: $input) @client\n  }\n"]);return y=function(){return n},n}var h=f()(y()),I=function(e){return s.a.createElement(l.c,e,function(t,r){var a=r.error;return a?(function(e){console.error(e),"development"!==n.env.ENV&&Object(m.b)(e)}(a),e.errorHandler&&e.errorHandler(),e.errorRender?e.errorRender:e.showModalOnError?i()(l.c,{mutation:h},void 0,function(n){return i()(v.a,{openModal:n,type:"MUTATION"})}):null):e.children(t,r)})};I.propTypes={children:g.a,errorHandler:c.a.func,showModalOnError:c.a.bool,errorRender:c.a.func},e.a=I}).call(this,t(76))},26:function(n,e,t){"use strict";t.d(e,"a",function(){return a});var r=t(1),i=t.n(r),a=i.a.oneOfType([i.a.node,i.a.object,i.a.func])},272:function(n,e,t){"use strict";(function(n){t.d(e,"a",function(){return r});var r=n.hot&&!1}).call(this,t(252)(n))},274:function(n){n.exports={__schema:{types:[{kind:"INTERFACE",name:"Item",possibleTypes:[{name:"Collection"},{name:"Pen"},{name:"Post"},{name:"Project"}]},{kind:"INTERFACE",name:"Owner",possibleTypes:[{name:"Team"},{name:"User"}]},{kind:"INTERFACE",name:"SessionContext",possibleTypes:[{name:"Team"},{name:"User"}]}]}}},49:function(n,e,t){"use strict";t.d(e,"a",function(){return r});var r={ORGANIZE:"Organize",PIN:"Pin",POPUPS:"Popups",MODAL:"Modal",MESSAGE:"Message",LINK:"Link",DIALOG:"Dialog",POPUP_PROP:"PopupProp",USER:"User",FEATURE_NOTIFICATION:"FeatureNotification",CLIENT_USER:"ClientUser",ITEM_LOCAL_STATE:"ItemLocalState",ITEM_IDENTIFIER:"ItemIdentifier"}},51:function(n,e,t){"use strict";t.d(e,"a",function(){return r}),t.d(e,"b",function(){return i});var r={warning:{style:"warning",buttonStyle:"red"},error:{style:"error",buttonStyle:"yellow"},good:{style:"error",buttonStyle:"green"},neutral:{style:"neutral",buttonColor:"grey"}},i={PROJECT_LIMIT:"PROJECT_LIMIT",LOG_IN_TO_CREATE_PROJECTS:"LOG_IN_TO_CREATE_PROJECTS",LOG_IN_TO_CREATE_POSTS:"LOG_IN_TO_CREATE_POSTS",LOG_IN_TO_CREATE_COLLECTION:"LOG_IN_TO_CREATE_COLLECTION",CONFIRM_LOGOUT:"CONFIRM_LOGOUT",ERROR:"ERROR",DELETE_ITEM:"DELETE_ITEM"}},56:function(n,e,t){"use strict";t.d(e,"b",function(){return i}),t.d(e,"a",function(){return a}),t.d(e,"c",function(){return u});var r=t(13),i=function n(e){return s(a,n,e)},a=function(n){return n.replace(/_\w/g,function(n){return n[1].toUpperCase()})},u=function n(e){return s(o,n,e)},o=function(n){return n.replace(/([A-Z])/g,function(n){return"_"+n.toLowerCase()})},s=function(n,e,t){return(t=t.mapKeys(function(e){return n(e)})).withMutations(function(n){var t=n.filter(function(n){return r.Iterable.isKeyed(n)}),i=n.filter(function(n){return r.Iterable.isIndexed(n)});t.map(function(t,r){n.set(r,e(n.get(r)))}),i.map(function(t,r){n.set(r,t.map(function(n,r){return e(t.get(r))}))})})}},61:function(n,e,t){"use strict";var r=t(0),i=t.n(r),a=t(3),u=t.n(a),o=t(4),s=t.n(o),p=t(6),c=t.n(p),l=t(5),d=t.n(l),f=t(7),m=t.n(f),v=t(2),g=t.n(v);function y(n){var e=i()(n,{});return function(n){function t(){return u()(this,t),c()(this,d()(t).apply(this,arguments))}return m()(t,n),s()(t,[{key:"render",value:function(){return e}}]),t}(g.a.Component)}var h=t(272);function I(n){return h.a?n:y}t.d(e,"a",function(){return I})},66:function(n,e,t){"use strict";t.d(e,"c",function(){return r}),t.d(e,"a",function(){return i}),t.d(e,"b",function(){return a});var r={PUBLIC:"PUBLIC",POPULAR:"POPULAR",TAG:"TAG",SEARCH:"SEARCH"},i={ID:"ID",POPULARITY:"POPULARITY"},a={ASC:"ASC",DESC:"DESC"}},70:function(n,e,t){"use strict";var r=t(0),i=t.n(r),a=(t(2),t(1)),u=t.n(a),o=t(86),s=t(202),p=t(26),c=function(n){var e=n.children,t=n.client;return i()(o.b,{client:t},void 0,i()(s.a,{client:t},void 0,e))};c.propTypes={children:p.a,client:u.a.object.isRequired},e.a=c},71:function(n,e,t){"use strict";var r,i=t(161),a=t(307),u=t(273),o=t(68),s=t(249),p=t(274),c=t(10),l=t.n(c),d=t(38),f=t.n(d),m=t(63),v=t.n(m),g=t(14),y=t.n(g),h=t(115),I=t(15),w=t.n(I),S=t(106),P=t(178);function b(){var n=y()(["\n  query SessionUserHooksQuery {\n    sessionUser {\n      anon\n      id\n    }\n  }\n"]);return b=function(){return n},n}function O(){var n=y()(["\n  type FeatureNotification {\n    value: String!\n    showUntil: String\n  }\n\n  extend type Query {\n    featureNotifications: [String]\n  }\n\n  extend type Mutation {\n    featureNotificationsHidePinsNotification: String\n  }\n\n  extend type Mutation {\n    featureNotificationsHideNotification(id: ID!): String\n  }\n"]);return O=function(){return n},n}var k=Object(S.c)(),_=w()(O()),T=w()(b()),D={defaults:{featureNotifications:[]},queries:{},mutations:{featureNotificationsHidePinsNotification:function(){return h.a(window.__user,P.b.PINS),null},featureNotificationsHideNotification:function(n,e){var t=e.id;return h.a(window.__user,t),null}},typeDefs:_,initializeFirestore:function(){var n=v()(f.a.mark(function n(e){var t,i,a;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.query({query:T});case 2:if(t=n.sent,i=t.data,(a=i.sessionUser).hashid=a.id,a&&!a.anon){n.next=8;break}return n.abrupt("return");case 8:r=e,h.g(a,function(n){var e,t,i={featureNotifications:(e=n.featureNotifications,t=[],Object.keys(P.a).forEach(function(n){var r=P.a[n];e.includes(r.value)||k<r.showUntil&&t.push(r.value)}),t)};r.writeData({data:i})});case 10:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()};function E(){var n=y()(['\n  extend type Mutation {\n    "Makes save call to the Pen Editor"\n    itemSavePen: String\n  }\n']);return E=function(){return n},n}var C={defaults:{},queries:{},mutations:{itemSavePen:function(){return setTimeout(function(){CP.pen.save()},1),null}},typeDefs:w()(E())},N=t(121);function x(){var n=y()(['\n  input UpdateDeletedItemInput {\n    key: String!\n    isDeleting: Boolean\n    isRestoring: Boolean\n  }\n\n  extend type Mutation {\n    "Updates the client state (isDeleting, isRestoring) of a deleted Item"\n    updateDeletedItem(input: UpdateDeletedItemInput!): DeletedItem\n  }\n\n  extend type DeletedItem {\n    isDeleting: Boolean\n    isRestoring: Boolean\n  }\n']);return x=function(){return n},n}var R=w()(x()),M={updateDeletedItem:function(n,e,t){var r=e.input,i=t.cache,a=i.readQuery({query:N.DeletedItemsQuery,variables:{input:{pagination:{count:10}}}}),u=a.deletedItems.deletedItems,o=l()({},a,{deletedItems:l()({},a.deletedItems,{deletedItems:L(u,r)})});return i.writeQuery({query:N.DeletedItemsQuery,data:o}),null}},L=function(n,e){return n.map(function(n){return n.key===e.key?l()({},n,e):n})},A={defaults:{},queries:{},mutations:M,typeDefs:R,extensions:{DeletedItem:{isRestoring:function(n){return n.isRestoring||!1},isDeleting:function(n){return n.isDeleting||!1}}}};function U(){var n=y()(['\n  "Item identifying information from URL"\n  type ItemIdentifier {\n    id: ID!\n    itemType: String!\n  }\n\n  extend type Query {\n    itemIdentifier: ItemIdentifier\n  }\n']);return U=function(){return n},n}var F={defaults:{itemIdentifier:null},queries:{},mutations:{},typeDefs:w()(U())},q=t(66),Q=t(49);function j(){var n=y()(["\n  type Organize {\n    viewTypeControl: String\n    sortByControl: SortByEnum\n    sortOrderControl: SortOrderEnum\n    searchTermControl: String\n  }\n\n  input OrganizeUpdateControlsInput {\n    viewTypeControl: String\n    sortByControl: SortByEnum\n    sortOrderControl: SortOrderEnum\n    searchTermControl: String\n  }\n\n  extend type Mutation {\n    organizeUpdateControls(input: OrganizeUpdateControlsInput!): String\n  }\n\n  extend type Query {\n    organize: Organize\n  }\n"]);return j=function(){return n},n}var G,H={defaults:{organize:{__typename:Q.a.ORGANIZE,viewTypeControl:q.c.PUBLIC,sortByControl:q.a.ID,sortOrderControl:q.b.DESC,searchTermControl:""}},queries:{},mutations:{organizeUpdateControls:function(n,e,t){var r=e.input,i=t.cache,a={organize:l()({__typename:Q.a.ORGANIZE},r)};return i.writeData({data:a}),null}},typeDefs:w()(j())};function B(){var n=y()(["\n  input PinsAddPinInput {\n    id: ID!\n    itemType: String!\n    title: String\n  }\n\n  input PinsRemovePinInput {\n    id: ID!\n  }\n\n  type Pin {\n    id: ID!\n    itemType: String\n    title: String\n    updatedAt: String\n    url: String\n  }\n\n  extend type Query {\n    pins: [Pin]\n  }\n\n  extend type Mutation {\n    pinsAddPin(input: PinsAddPinInput!): Pin\n    pinsRemovePin(input: PinsRemovePinInput!): Pin\n  }\n"]);return B=function(){return n},n}var z=window.__user,J=w()(B()),V=function(n){return"pen"===n.itemType?"/you/pen/".concat(n.id):"post"===n.itemType?"/you/post/".concat(n.id):"project"===n.itemType?"/you/project/editor/".concat(n.id):"collection"===n.itemType?"/collection/".concat(n.id):"/you/pen/".concat(n.id)},K={defaults:{pins:[]},queries:{},mutations:{pinsAddPin:function(n,e){var t=e.input,r=t.id,i=t.itemType,a=t.title;return h.b(z,{__typename:Q.a.PIN,id:r,itemType:i.toLowerCase(),title:a,updatedAt:Object(S.c)()}),{id:r,__typename:Q.a.PIN}},pinsRemovePin:function(n,e){var t=e.input.id;return h.d(z,t),{id:t,__typename:Q.a.PIN}}},typeDefs:J,initializeFirestore:function(n){z&&!z.anon&&(G=n,h.f(z,function(n){var e={pins:n.map(function(n){return l()({},n,{__typename:Q.a.PIN,url:V(n)})})};G.writeData({data:e})}))}};function $(){var n=y()(["\n        query PopupsToggleMenuMutationPopups {\n          popups @client {\n            id\n            menu\n          }\n        }\n      "]);return $=function(){return n},n}function W(){var n=y()(["\n        query PopupsToggleDrawerMutationPopups {\n          popups @client {\n            id\n            drawer\n          }\n        }\n      "]);return W=function(){return n},n}function Y(){var n=y()(["\n  type PopupProp {\n    name: String\n    value: String\n  }\n\n  type Modal {\n    id: ID\n    type: String\n    props: [PopupProp]\n    dismissable: Boolean\n  }\n\n  type Dialog {\n    id: ID\n    type: String\n    props: [PopupProp]\n  }\n\n  type Link {\n    url: String\n    label: String\n  }\n\n  type Message {\n    text: String\n    link: Link\n    timeout: Int\n  }\n\n  type Popups {\n    id: ID\n    message: Message\n    modal: Modal\n    menu: String\n    drawer: String\n    dialog: Dialog\n  }\n\n  input PopupPropInput {\n    name: String!\n    value: String!\n  }\n\n  input PopupsOpenModalInput {\n    type: String!\n    props: [PopupPropInput]\n    dismissable: Boolean\n  }\n\n  input PopupsOpenDialogInput {\n    type: String!\n    props: [PopupPropInput]\n  }\n\n  input PopupsAddMessageLinkInput {\n    url: String\n    label: String\n  }\n\n  input PopupsAddMessageInput {\n    text: String!\n    link: PopupsAddMessageLinkInput\n    timeout: Int\n  }\n\n  input PopupsDrawerInput {\n    drawer: String\n  }\n\n  input PopupsMenuInput {\n    menu: String\n  }\n\n  extend type Query {\n    popups: Popups\n  }\n  # Fun fact - GraphQL doesn't have a void type, so all local mutations\n  # need to have a return type even though in reality they return null\n  extend type Mutation {\n    popupsOpenModal(input: PopupsOpenModalInput!): String\n    popupsOpenDialog(input: PopupsOpenDialogInput!): String\n    popupsCloseModalAndDialog: String\n    popupsCloseDialog: String\n    popupsAddMessage(input: PopupsAddMessageInput!): String\n    popupsClearMessage: String\n    popupsOpenDrawer(input: PopupsDrawerInput!): String\n    popupsCloseDrawer: String\n    popupsToggleDrawer(input: PopupsDrawerInput!): String\n    popupsCloseMenu: String\n    popupsToggleMenu(input: PopupsMenuInput!): String\n  }\n"]);return Y=function(){return n},n}var Z={__typename:Q.a.POPUPS,id:"popups"},X={defaults:{popups:{__typename:Q.a.POPUPS,id:"popups",message:null,modal:null,menu:null,drawer:null,dialog:null}},queries:{},mutations:{popupsOpenModal:function(n,e,t){var r=e.input,i=r.type,a=r.props,u=r.dismissable,o=t.cache,s={popups:l()({},Z,{modal:{id:"modal",__typename:Q.a.MODAL,type:i,props:a||null,dismissable:!(!1===u)}})};return o.writeData({data:s}),null},popupsOpenDialog:function(n,e,t){var r=e.input,i=r.type,a=r.props,u=t.cache,o={popups:l()({},Z,{dialog:{id:"dialog",__typename:Q.a.DIALOG,type:i,props:a||null}})};return u.writeData({data:o}),null},popupsCloseModalAndDialog:function(n,e,t){var r=t.cache,i={popups:l()({},Z,{modal:null,dialog:null})};return r.writeData({data:i}),null},popupsCloseDialog:function(n,e,t){var r=t.cache,i={popups:l()({},Z,{dialog:null})};return r.writeData({data:i}),null},popupsAddMessage:function(n,e,t){var r=e.input,i=t.cache,a={popups:l()({},Z,{message:l()({},r,{__typename:Q.a.MESSAGE})})};return r.link?a.popups.message.link=l()({},a.popups.message.link,{__typename:Q.a.LINK}):a.popups.message.link=null,a.popups.message.timeout=r.timeout||null,i.writeData({data:a}),null},popupsClearMessage:function(n,e,t){var r=t.cache,i={popups:l()({},Z,{message:null})};return r.writeData({data:i}),null},popupsOpenDrawer:function(n,e,t){var r=e.input.drawer;return t.cache.writeData({data:{popups:{__typename:Q.a.POPUPS,id:"popups",drawer:r}}}),null},popupsCloseDrawer:function(n,e,t){return t.cache.writeData({data:{popups:{__typename:Q.a.POPUPS,id:"popups",drawer:null}}}),null},popupsToggleDrawer:function(n,e,t){var r=e.input.drawer,i=t.cache,a=i.readQuery({query:w()(W())}).popups.drawer===r;return i.writeData({data:{popups:{__typename:Q.a.POPUPS,id:"popups",drawer:a?null:r}}}),null},popupsCloseMenu:function(n,e,t){return t.cache.writeData({data:{popups:{__typename:Q.a.POPUPS,id:"popups",menu:null}}}),null},popupsToggleMenu:function(n,e,t){var r=e.input.menu,i=t.cache,a=i.readQuery({query:w()($())}).popups.menu===r;return i.writeData({data:{popups:{__typename:Q.a.POPUPS,id:"popups",menu:a?null:r}}}),null}},typeDefs:w()(Y())},nn=t(45),en=t(20);function tn(){var n=y()(["\n      fragment privacy on Pen {\n        private\n        __typename\n      }\n    "]);return tn=function(){return n},n}function rn(){var n=y()(["\n      query Item {\n        itemIdentifier @client {\n          id\n        }\n      }\n    "]);return rn=function(){return n},n}function an(){var n=y()(['\n  "Item state that exists in the Editor but hasn\'t been saved yet"\n  type ItemLocalState {\n    title: String\n  }\n\n  input LocalStateObjectInput {\n    title: String\n  }\n\n  input ItemLocalStateUpdateStateInput {\n    itemType: ItemEnum!\n    state: LocalStateObjectInput!\n  }\n\n  extend type Mutation {\n    "Syncs local state back to the Item\'s Editor data stores"\n    itemLocalStateUpdateState(input: ItemLocalStateUpdateStateInput!): String\n  }\n\n  extend type Query {\n    itemLocalState: ItemLocalState\n  }\n']);return an=function(){return n},n}var un={itemLocalState:{__typename:Q.a.ITEM_LOCAL_STATE,title:null}},on=w()(an()),sn=function(n){window.Hub&&(Hub.sub("pen-change",function(e,t){return cn(t,n)}),Hub.sub("pen-saved",function(e,t){return dn(t,n)}))},pn=function(n){window.Hub&&Hub.sub("project-change",function(e,t){return cn(t,n)})},cn=function(n,e){var t=ln(n);0!==Object.keys(t).length&&e.writeData({data:{itemLocalState:l()({__typename:Q.a.ITEM_LOCAL_STATE},t)}})},ln=function(n){return n.item?Object.keys(un.itemLocalState).reduce(function(e,t){return void 0!==n.item[t]&&(e[t]=n.item[t]),e},{}):{}},dn=function(n,e){var t=e.readQuery({query:w()(rn())}).itemIdentifier,r=e.readFragment({id:"Pen:".concat(t.id),fragment:w()(tn())});if(n.pen&&n.pen.private&&n.pen.private.current!==r.private){var i=!0===n.pen.private.current?CP.item.slug_hash_private:CP.item.slug_hash,a=window.location.pathname.replace(t.id,i);Object(nn.d)(a)}},fn={defaults:un,queries:{},mutations:{itemLocalStateUpdateState:function(n,e){var t=e.input,r=t.state,i=t.itemType;return i===en.a.PEN&&CP.item.setItemValue({origin:"client",item:r}),i===en.a.PROJECT&&window.projectStore.dispatch({type:"UPDATE_PROJECT",payload:{newSettings:r}}),null}},typeDefs:on,subscribeToItemEvents:function(n){sn(n),pn(n)}},mn=[D,C,A,F,fn,H,K,X],vn=function(n,e){var t=[{}].concat(e.map(function(e){return e[n]}));return Object.assign.apply(null,t)},gn=vn("defaults",mn),yn=vn("extensions",mn),hn=l()({Query:vn("queries",mn),Mutation:vn("mutations",mn)},yn),In=mn.map(function(n){return n.typeDefs}).filter(function(n){return void 0!==n});t.d(e,"a",function(){return Pn});var wn=Object(u.a)(function(n){var e=n.graphQLErrors,t=n.networkError;if(console.log(JSON.stringify(e,null,4)),e){if(e.error)return console.log("[GraphQL error]: ".concat(e.error));e.map(function(n){var e=n.message,t=n.locations,r=n.fields,i=n.path;console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(t[0],", Fields: ").concat(r,", Path: ").concat(i))})}t&&console.log("[Network error]: ".concat(t))}),Sn=new a.a({credentials:"same-origin",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},uri:"/graphql",batchInterval:20}),Pn=function(){if(window.__apolloClient)return window.__graphql&&window.__apolloClient.writeData(window.__graphql),window.__apolloClient;var n,e=new s.b({introspectionQueryResultData:p}),t=new s.a({fragmentMatcher:e}),r=new i.a({link:o.a.from([wn,Sn]),cache:t,typeDefs:In,resolvers:hn});return window.__apolloClient=r,r.writeData({data:gn}),window.__graphql&&r.writeData(window.__graphql),n=r,D.initializeFirestore(n),K.initializeFirestore(n),function(n){fn.subscribeToItemEvents(n)}(r),r}()},81:function(n,e,t){"use strict";(function(n){t.d(e,"a",function(){return l}),t.d(e,"b",function(){return d});var r,i=t(38),a=t.n(i),u=t(63),o=t.n(u),s="production"!==n.env.ENV,p="test"!==n.env.ENV,c=function(){var e=o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(!r){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,t.e(18).then(t.t.bind(null,1454,7));case 6:(r=e.sent).configure({apiKey:"32c374f5",environment:n.env.ENV,revision:n.env.CI_COMMIT_SHA});case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var n=o()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!s){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,c();case 4:r.setContext(e);case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=o()(a.a.mark(function n(e){var t,i=arguments;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=i.length>1&&void 0!==i[1]?i[1]:{},!s){n.next=4;break}return p&&console.error({error:e,data:t}),n.abrupt("return");case 4:return n.next=6,c();case 6:r.notify(e,t);case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();s||c()}).call(this,t(76))}}]);
//# sourceMappingURL=1-3ecfa80291f7084f0158.chunk.js.map